from telegram import Update, BotCommand from telegram.ext import ApplicationBuilder, ContextTypes, CommandHandler, MessageHandler, filters import os TOKEN = os.getenv("TOKEN") film_links = { "inception": "https://example.com/inception.mp4", "interstellar": "https://example.com/interstellar.mp4", "جدایی نادر از سیمین": "https://example.com/jodaei.mp4" } def get_commands(): return [ BotCommand("start", "شروع ربات"), BotCommand("help", "راهنمای استفاده"), BotCommand("films", "لیست فیلم‌های موجود"), BotCommand("suggest", "پیشنهاد فیلم"), BotCommand("about", "درباره ربات"), BotCommand("empty", "پاک کردن لیست"), BotCommand("contact", "ارتباط با ادمین") ] async def set_commands(app): await app.bot.set_my_commands(get_commands()) async def start(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("سلام! اسم فیلم رو بفرست تا لینک دانلودشو بفرستم.") async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("از /films برای دیدن لیست فیلم‌ها استفاده کن.") async def films(update: Update, context: ContextTypes.DEFAULT_TYPE): fl = "\n".join(f"- {f}" for f in film_links) await update.message.reply_text(f"🎥 فیلم‌ها:\n{fl}") async def suggest(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("✨ پیشنهاد: Inception و Interstellar!") async def about(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("ربات توسط مهرزاد ساخته شده.") async def empty(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("لیست پاک شد.") async def contact(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("ادمین: @mehrzad_admin") async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE): t = update.message.text.strip().lower() if t in film_links: await update.message.reply_text(f"🎬 لینک:\n{film_links[t]}") else: await update.message.reply_text("❌ پیدا نشد.") app = ApplicationBuilder().token(TOKEN).build() app.add_handler(CommandHandler("start", start)) app.add_handler(CommandHandler("help", help_command)) app.add_handler(CommandHandler("films", films)) app.add_handler(CommandHandler("suggest", suggest)) app.add_handler(CommandHandler("about", about)) app.add_handler(CommandHandler("empty", empty)) app.add_handler(CommandHandler("contact", contact)) app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message)) import asyncio async def main(): await set_commands(app) print("🤖 ربات روشنه...") await app.run_polling() if __name__ == "__main__": asyncio.run(main()) 
فایل requirements.txt:
python-telegram-bot==20.3 
